<html ng-app="Squad">

<head>
    <title>
        Squad
    </title>
    <link rel="stylesheet" href="css/uikit.min.css"/>
    <!-- <script src="js/jquery.js"></script> -->
    <!-- <script src="https://code.jquery.com/jquery-1.11.1.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/uikit.min.js"></script>
    <script src="js/uikit-icons.min.js"></script>
    <script language="JavaScript">
        //        alert("Hi there!")
        function findGetParameter(parameterName) {
            var result = null,
                tmp = [];
            location.search
                .substr(1)
                .split("&")
                .forEach(function (item) {
                    tmp = item.split("=");
                    if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
                });
            return result;
        }
        document.title = findGetParameter('dept') +' Squad ' + findGetParameter('squad');
    </script>
    <style>
        .ng-cloak {
            display: none !important;
        }

        #map {
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        /* html, body {
            height: 100%;
            margin: 0;
            padding: 0;
          } */
    </style>

</head>

<body>
<div class="uk-width-1-1 uk-container-center uk-text-center">
    <h1 class="uk-heading-primary">Squad <script type="text/javascript">
                                    document.write(findGetParameter('dept'))
                                </script></h1>
</div>

<div class="uk-text-center" uk-grid>
    <div class="uk-width-1-6">
        <ul class="uk-nav uk-nav-default" uk-switcher="connect: .nav-class">
            <li><a href="#">Send Updates</a></li>
            <li><a href="#">Dept Orders</a></li>
        </ul>
    </div>
    <div class="uk-width-5-6">
        <ul class="uk-switcher nav-class uk-margin">
            <li>
                <form class="uk-form-horizontal uk-margin-large" id="updateDept">

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-department">Department</label>
                        <div class="uk-form-controls">
                            <div class="uk-text" id=form-department>
                                <script type="text/javascript">
                                    document.write(findGetParameter('dept'))
                                </script>
                            </div>
                        </div>
                    </div>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-squad">Squad ID</label>
                        <div class="uk-form-controls">
                            <!--<input class="uk-input" id="squad" type="text" placeholder="Squad number...">-->
                            <script type="text/javascript" id=form-squad>
                                document.write(findGetParameter('squad'))
                            </script>
                        </div>
                    </div>
                    <input type="hidden" name="DepartmentID">
                    <input type="hidden" name="SquadID">

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-long">Longitude</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" id="form-long"  name="Lon" type="text" placeholder="long...">
                        </div>
                    </div>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-latitude">Latitude</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" id="form-latitude" name="Lat" type="text" placeholder="lat...">
                        </div>
                    </div>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-task">Crisis ID</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" id="form-task" name="CrisisID" type="text" placeholder="Crisis ID...">
                        </div>
                    </div>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-status">Task Status</label>
                        <div class="uk-form-controls">
                            <select class="uk-select" id="form-status" name="SquadStatus">
                                <option>On-Going</option>
                                <option>Completed</option>                        
                            </select>
                        </div>
                    </div>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form-description">Comments</label>
                        <div class="uk-form-controls">
                    <textarea class="uk-textarea" id="form-description" rows="5" name="Comments"
                              placeholder="Task description..."></textarea>
                        </div>
                    </div>

                    <div class="uk-margin" uk-margin>
                        <button class="uk-button uk-button-default">Submit</button>
                    </div>
                </form>
            </li>
            <li ng-controller="ReceiveDeptOrdersController">
              <ul uk-accordion="multiple: true" class="uk-list uk-list-striped">
                <li ng-repeat="order in DeptOrders">
                  <h3 class="uk-accordion-title">Crisis ID: {{order.CrisisID}}</h3>
                  <div class="uk-accordion-content">
                    <div class="uk-card uk-card-default uk-card-body uk-width-1-1 uk-margin uk-card-hover">
                        <ul class ="uk-list">
                            <li>Squad ID: {{order.SquadID}} </li>
                            <li>Lat: {{order.Lat}}</li>
                            <li>Lon: {{order.Lon}}</li>
                            <li>Severity: {{order.Severity}}</li>
                            <li>Comments: {{order.Comments}}</li>
                        </ul>
                    </div>
                  </div>
                </li>
              </ul>
            </li>
        </ul>

    </div>
</div>
<script>
    document.getElementsByName('DepartmentID')[0].setAttribute('value', findGetParameter('dept'));
    document.getElementsByName('SquadID')[0].setAttribute('value', findGetParameter('squad'));
</script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://code.angularjs.org/1.6.5/angular.js"></script>
<script src="https://code.angularjs.org/1.6.5/angular-route.js"></script>
<script src="/Squad/views/app.js"></script>
<script src="/Squad/views/updateDeptForm.js"></script>
</body>

</html>
